<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>旋转图片</title>
</head>
<body>

<img src="./close.png" alt="" width="25%" style=""><br>原图
<!--<img src="data:image/png;base64,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KwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUeB/AXm7Saej/FY6AAAAAElFTkSuQmCC" alt="" width="25%" style=""><br>原图-->
<img src="./close.png" alt="" width="25%" id="temp-img" style="display:none;">
<div class="canvas-box"></div>向右旋转90°
</body>
</html>
<script src="../_libs/jquery-1.12.4.js"></script>
<script>
    var deg = 90
    var imgUrl = $('#temp-img').attr('src'),
        imgW = parseInt($('#temp-img').width()),
        imgH = parseInt($('#temp-img').height());
    console.log('----', getBase64(imgUrl, imgW, imgH, deg))
    
    // console.log('----', getBase64('data:image/png;base64,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KwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUUAoRiIHCBBoEhCKTdPWKwECUeB/AXm7Saej/FY6AAAAAElFTkSuQmCC', 300, 600, deg))
    function getBase64(imgUrl, imgW, imgH, deg) {
        //通过构造函数来创建的 img 实例，在赋予 src 值后就会立刻下载图片，相比 createElement() 创建 <img> 省去了 append()，也就避免了文档冗余和污染
        // var img = new Image();
        var img = document.createElement("img")
        img.src = imgUrl;
    
        var canvas = document.createElement("canvas"); //创建canvas元素
        var ctx = canvas.getContext("2d"),
            //确保canvas的尺寸和图片一样
            width = imgW,
            height = imgH,
            w = deg % 180 == 0 ? width : height,
            h = deg % 180 == 0 ? height : width,
            obj = {
                x: w / 2,
                y: h / 2,
                w: width,
                h: height
            };
        canvas.width = w;
        canvas.height = h;
    
        ctx.translate(obj.x, obj.y);
        ctx.rotate(deg * Math.PI / 180);
        ctx.translate(-obj.x, -obj.y);
    
        ctx.drawImage(img, obj.x - obj.w / 2, obj.y - obj.h / 2, obj.w, obj.h); //将图片绘制到canvas中
        
        $('.canvas-box').css({
            'width': w,
            'height': h
        }).html('');
        $('.canvas-box').append(canvas);
        
        
        // img.onload = function () { //要先确保图片完整获取到，这是个异步事件
        //     var canvas = document.createElement("canvas"), //创建canvas元素
        //         ctx = canvas.getContext("2d"),
        //         //确保canvas的尺寸和图片一样
        //         width = imgW,
        //         height = imgH,
        //         w = deg % 180 == 0 ? width : height,
        //         h = deg % 180 == 0 ? height : width,
        //         obj = {
        //             x: w / 2,
        //             y: h / 2,
        //             w: width,
        //             h: height
        //         };
        //     canvas.width = w;
        //     canvas.height = h;
        //
        //     ctx.translate(obj.x, obj.y);
        //     ctx.rotate(deg * Math.PI / 180);
        //     ctx.translate(-obj.x, -obj.y);
        //
        //     ctx.drawImage(Img, obj.x - obj.w / 2, obj.y - obj.h / 2, obj.w, obj.h); //将图片绘制到canvas中
        //     dataURL = canvas.toDataURL(); //转换图片为dataURL（转换成base64）
        //     // console.log('111', dataURL)
        //     $('.canvas-box').css({
        //         'width': w,
        //         'height': h
        //     }).html('');
        //     $('.canvas-box').append(canvas);
        // }
        // setTimeout(function () {
        //
        // }, 5000)
        return canvas.toDataURL() //转换图片为dataURL（转换成base64）
    }
</script>
